@model CAPSTONE_TEAM01_2024.ViewModels.SemesterPlanViewModel
@{
ViewData["Title"] = "Semester Plan";
}
<style>
    .modal-dialog {
        max-width: 90%;
        width: 100%; 
    }

    textarea {
        resize: none; 
        padding: 8px;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 14px;
        background-color: #fff;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .modal-footer {
        justify-content: flex-end;
        display: flex;
        width: 100%;
        align-items: center;
        padding-top: 10px;
        border-top: 1px solid #ddd;
    }

   
    .fields-row {
        display: flex;
        width: 100%;
        border-bottom: 2px solid #ccc;
        padding-bottom: 5px;
        gap: 10px;
        font-weight: bold;
        align-items: center;
    }

       .header-cell {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 60px;
        min-width: 100px;
        box-sizing: border-box;
        padding: 0 15px; 
        text-align: center;
    }
    select {
        width: 100%;
        padding: 8px;
        border-radius: 5px;
        border: 1px solid #ddd;
        font-size: 14px;
    }

   
    .row-container > div {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

   
    .btn {
        padding: 10px 20px;
        font-size: 14px;
        border-radius: 5px;
        cursor: pointer;
    }

    .btn-secondary {
        background-color: #6c757d;
        color: white;
        border: none;
    }

    .btn-primary {
        background-color: #007bff;
        color: white;
        border: none;
    }

       .btn:hover {
        opacity: 0.9;
    }
</style>



<div class="content-wrapper" style="min-height: 912.2px;">
    <!-- Content Header (Page header) -->
    <header class="content-header">
        <div class="container-fluid">
            <div class="row mb-2">
                <div class="col-sm-6">
                    <h1 class="m-0">Kế Hoạch</h1>
                </div>
                <!-- /.col -->
            </div>
            <!-- /.row -->
        </div>
        <!-- /.container-fluid -->
    </header>
    <!-- /.content-header -->
    <!-- Main content -->
    <main class="content">
        <div class="container-fluid">
            <div class="card">
                <div class="card-header">
                    <div class="row text-center">
                        <div class="col-auto">
                            <button type="button" class="btn btn-success" onclick="openAddPlanModal()">
                                <i class="bi bi-plus"></i> Thêm Kế Hoạch
                            </button>
                            <button type="button" class="btn btn-secondary" onclick="exportPlans()">
                                <i class="bi bi-download custom-icon"></i> Export
                            </button>
                        </div>
                        <div class="col">
                            <nav class="navbar navbar-light bg-light">
                                <form class="d-flex ms-auto">
                                    <input class="form-control me-2" type="search" placeholder="Nhập nội dung tìm kiếm" aria-label="Search">
                                </form>
                            </nav>
                        </div>
                    </div>
                    <!-- Filter Combo Box -->
                    <div class="row mt-2">
                        <div class="col-4 text-left">
                            <label for="statusFilter" class="form-label">Trạng Thái</label>
                            <select id="statusFilter" class="form-select custom-select" style="width: 150px;" onchange="filterTable()">
                                <option value="">Tất cả</option>
                                <option value="Đã nộp">Đã Nộp</option>
                                <option value="Chưa nộp">Chưa Nộp</option>
                                <option value="Nháp">Nháp</option>
                            </select>
                        </div>
                    </div>
                </div>
                <!-- /.card-header -->
                <div class="card-body">
                    @if (TempData["Success"] != null)
                    {
                        <div class="alert alert-success">@TempData["Success"]</div>
                    }
                    @if (TempData["Error"] != null)
                    {
                        <div class="alert alert-danger">@TempData["Error"]</div>
                    }
                    @if (TempData["Warning"] != null)
                    {
                        <div class="alert alert-danger">@TempData["Warning"]</div>
                    }
                    <table class="table table-striped">
                        <thead>
                            <tr class="text-center">
                                <th>#</th>
                                <th>Năm Học</th>
                                <th>Loại Kế Hoạch</th>
                                <th>Mã Lớp</th>
                                <th>Tên Cố Vấn</th>
                                <th>Ngày Tạo</th>
                                <th>Trạng Thái</th>
                                <th>Thao Tác</th>
                            </tr>
                        </thead>
                        <tbody id="data-table">
                            <tr id="noresults" style="display: none;">
                                <td colspan="9" class="text-center">Không tìm thấy nội dung</td>
                            </tr>
                        </tbody>
                    </table>
                    <!-- Pagination Controls -->
                    <nav aria-label="Page navigation">
                        <ul class="pagination justify-content-end">
                        </ul>
                    </nav>
                </div>
                <!-- /.card-body -->
            </div>
        </div>
    </main>
</div>

<!--Add Modal--> 
<div class="modal fade" id="AddSemesterPlanModal" tabindex="-1" aria-labelledby="AddSemesterPlanModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header" style="display: flex; justify-content: space-between; width: 100%; align-items: center;">
                <h5 class="modal-title" id="AddSemesterPlanModalLabel">Thêm Kế Hoạch Học Kỳ</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="fields-row" style="display: flex; align-items: center; gap: 10px; width: 100%; font-weight: bold; padding-bottom: 5px;">
                <div style="flex: 1; text-align: center;">Kế Họach CVHT Năm </div>
                <div style="flex: 1; text-align: center;">
                    <select id="schoolyear" name="SelectedSchoolYear" style="width: 100%;">
                        @foreach (var item in Model.SchoolYears)
                        {
                        <option value="@item.Value">@item.Text</option>
                        }
                    </select>
                </div>
                <div style="flex: 1; text-align: center;">Lớp: </div>
                <div style="flex: 1; text-align: center;">
                    <select id="schoolyear" name="SelectedSchoolYear" style="width: 100%;">
                        @foreach (var item in Model.Class)
                        {
                        <option value="@item.Value">@item.Text</option>
                        }
                    </select>
                </div>
            </div>

            <!-- Header Row for Fields -->
            <div class="fields-row" style="flex: 1; text-align: center; height: 50px; display: flex; align-items: center;">
                <div class="header-cell" style="flex: 1; text-align: center;">Tiêu Chí</div>
                <div class="header-cell" style="flex: 1; text-align: center;">Mô Tả Công Việc</div>
                <div class="header-cell" style="flex: 1; text-align: center;">Cách Thực Hiện</div>
                <div class="header-cell" style="flex: 1; text-align: center;">Định Lượng</div>
                <div class="header-cell" style="flex: 1; text-align: center;">Thời Gian</div>
                <div class="header-cell" style="flex: 1; text-align: center;">Ghi Chú</div>
            </div>
            <!-- Rows for Tiêu Chí 1 -->
                <div style="display: flex; width: 100%;">
                <textarea name="tieuChi1" style="flex: 1; min-width: 100px; height: 200px; font-weight: bold;" readonly>1.Một số nội dung cơ bản của nhiệm vụ CVHT</textarea>
                    <div style="flex: 2; display: flex; flex-direction: column; gap: 10px;">
                        <textarea name="moTaCongViec1-1" style="flex: 1; min-width: 100px; height: 50px; font-weight: bold;" readonly>Kế hoạch CVHT</textarea>
                        <textarea name="moTaCongViec1-2" style="flex: 1; min-width: 100px; height: 50px; font-weight: bold;" readonly>Họp lớp tập trung</textarea>
                    <textarea name="moTaCongViec1-3" style="flex: 1; min-width: 100px; height: 50px; font-weight: bold;" readonly>Lịch CVHT tư vấn cá nhân cho sinh viên</textarea>
                    </div>
                    <div style="flex: 1; display: flex; flex-direction: column; gap: 10px;">
                        <textarea name="cachThucHien1-1" style="flex: 1; min-width: 100px; height: 50px;"></textarea>
                        <textarea name="cachThucHien1-2" style="flex: 1; min-width: 100px; height: 50px;"></textarea>
                        <textarea name="cachThucHien1-3" style="flex: 1; min-width: 100px; height: 50px;"></textarea>
                    </div>
                    <div style="flex: 1; display: flex; flex-direction: column; gap: 10px;">
                        <textarea name="dinhLuong1-1" style="flex: 1; min-width: 100px; height: 50px;"></textarea>
                        <textarea name="dinhLuong1-2" style="flex: 1; min-width: 100px; height: 50px;"></textarea>
                        <textarea name="dinhLuong1-3" style="flex: 1; min-width: 100px; height: 50px;"></textarea>
                    </div>
                    <div style="flex: 1; display: flex; flex-direction: column; gap: 10px;">
                        <textarea name="thoiGian1-1" style="flex: 1; min-width: 100px; height: 50px;"></textarea>
                        <textarea name="thoiGian1-2" style="flex: 1; min-width: 100px; height: 50px;"></textarea>
                        <textarea name="thoiGian1-3" style="flex: 1; min-width: 100px; height: 50px;"></textarea>
                    </div>
                    <div style="flex: 1; display: flex; flex-direction: column; gap: 10px;">
                        <textarea name="ghiChu1-1" style="flex: 1; min-width: 100px; height: 50px;">Có lập kế hoạch CVHT theo TB</textarea>
                    <textarea name="ghiChu1-2" style="flex: 1; min-width: 100px; height: 50px;">Tổ chức 100% các buổi họp tập trung online</textarea>
                    <textarea name="ghiChu1-3" style="flex: 1; min-width: 100px; height: 50px;">Có TB lịch cho SV và trực theo lịch đã công bố</textarea>
                    </div>
                </div>
                <!-- Rows for Tiêu Chí 2 -->
                <div style="display: flex; width: 100%;">
                <textarea name="tieuChi2" style="flex: 1; min-width: 100px; height: 200px; font-weight: bold;" readonly>2.Hướng dẫn sinh viên lập và đăng ký kế hoạch học tập (KHHT)</textarea>
                    <div style="flex: 2; display: flex; flex-direction: column; gap: 10px;">
                    <textarea name="moTaCongViec2-1" style="flex: 1; min-width: 100px; height: 50px; font-weight: bold;" readonly>Hướng dẫn sinh viên lập và đăng ký KHHT</textarea>
                    <textarea name="moTaCongViec2-2" style="flex: 1; min-width: 100px; height: 50px; font-weight: bold;" readonly>Hướng dẫn sinh viên ĐKHP</textarea>

                    </div>
                    <div style="flex: 1; display: flex; flex-direction: column; gap: 10px;">
                        <textarea name="cachThucHien2-1" style="flex: 1; min-width: 100px; height: 50px;"></textarea>
                        <textarea name="cachThucHien2-2" style="flex: 1; min-width: 100px; height: 50px;"></textarea>

                    </div>
                    <div style="flex: 1; display: flex; flex-direction: column; gap: 10px;">
                        <textarea name="dinhLuong2-1" style="flex: 1; min-width: 100px; height: 50px;"></textarea>
                        <textarea name="dinhLuong2-2" style="flex: 1; min-width: 100px; height: 50px;"></textarea>

                    </div>
                    <div style="flex: 1; display: flex; flex-direction: column; gap: 10px;">
                        <textarea name="thoiGian2-1" style="flex: 1; min-width: 100px; height: 50px;"></textarea>
                        <textarea name="thoiGian2-2" style="flex: 1; min-width: 100px; height: 50px;"></textarea>

                    </div>
                    <div style="flex: 1; display: flex; flex-direction: column; gap: 10px;">
                        <textarea name="ghiChu2-1" style="flex: 1; min-width: 100px; height: 50px;">Có ít nhất 70% SV lập và đăng ký KHHT ở mỗi học kỳ</textarea>
                        <textarea name="ghiChu2-2" style="flex: 1; min-width: 100px; height: 50px;">Có ít nhất 70% SV lập và đăng ký KHHT ở mỗi học kỳ</textarea>

                    </div>
                </div>
                <!-- Rows for Tiêu Chí 3 -->
                <div style="display: flex; width: 100%;">
                <textarea name="tieuChi3" style="flex: 1; min-width: 100px; height: 200px; font-weight: bold;" readonly>3.Đăng ký học phần (ĐKHP)</textarea>
                    <div style="flex: 2; display: flex; flex-direction: column; gap: 10px;">
                    <textarea name="moTaCongViec3-1" style="flex: 1; min-width: 100px; height: 50px; font-weight: bold;" readonly>Tư vấn phương pháp học tập</textarea>
                    <textarea name="moTaCongViec3-2" style="flex: 1; min-width: 100px; height: 50px; font-weight: bold;" readonly>Tổ chức cho sinh viên chia sẻ kinh nghiệm học tập</textarea>

                    </div>
                    <div style="flex: 1; display: flex; flex-direction: column; gap: 10px;">
                        <textarea name="cachThucHien3-1" style="flex: 1; min-width: 100px; height: 50px;"></textarea>
                        <textarea name="cachThucHien3-2" style="flex: 1; min-width: 100px; height: 50px;"></textarea>

                    </div>
                    <div style="flex: 1; display: flex; flex-direction: column; gap: 10px;">
                        <textarea name="dinhLuong3-1" style="flex: 1; min-width: 100px; height: 50px;"></textarea>
                        <textarea name="dinhLuong3-2" style="flex: 1; min-width: 100px; height: 50px;"></textarea>

                    </div>
                    <div style="flex: 1; display: flex; flex-direction: column; gap: 10px;">
                        <textarea name="thoiGian3-1" style="flex: 1; min-width: 100px; height: 50px;"></textarea>
                        <textarea name="thoiGian3-2" style="flex: 1; min-width: 100px; height: 50px;"></textarea>

                    </div>
                    <div style="flex: 1; display: flex; flex-direction: column; gap: 10px;">
                        <textarea name="ghiChu3-1" style="flex: 1; min-width: 100px; height: 50px;">Có ít nhất 70% SV học đúng lộ trình của năm học</textarea>

                    </div>
                </div>
                <!-- Rows for Tiêu Chí 4 -->
                <div style="display: flex; width: 100%;">
                <textarea name="tieuChi4" style="flex: 1; min-width: 100px; height: 200px; font-weight: bold;" readonly>4.Tư vấn phương pháp học tập, tổ chức cho sinh viên chia sẻ kinh nghiệm học tập</textarea>
                    <div style="flex: 2; display: flex; flex-direction: column; gap: 10px;">
                    <textarea name="moTaCongViec4-1" style="flex: 1; min-width: 100px; height: 50px; font-weight: bold;" readonly>Xử lý học vụ</textarea>
                    <textarea name="moTaCongViec4-2" style="flex: 1; min-width: 100px; height: 50px; font-weight: bold;" readonly>Cảnh báo sớm</textarea>

                    </div>
                    <div style="flex: 1; display: flex; flex-direction: column; gap: 10px;">
                        <textarea name="cachThucHien4-1" style="flex: 1; min-width: 100px; height: 50px;"></textarea>
                        <textarea name="cachThucHien4-2" style="flex: 1; min-width: 100px; height: 50px;"></textarea>

                    </div>
                    <div style="flex: 1; display: flex; flex-direction: column; gap: 10px;">
                        <textarea name="dinhLuong4-1" style="flex: 1; min-width: 100px; height: 50px;"></textarea>
                        <textarea name="dinhLuong4-2" style="flex: 1; min-width: 100px; height: 50px;"></textarea>

                    </div>
                    <div style="flex: 1; display: flex; flex-direction: column; gap: 10px;">
                        <textarea name="thoiGian4-1" style="flex: 1; min-width: 100px; height: 50px;"></textarea>
                        <textarea name="thoiGian4-2" style="flex: 1; min-width: 100px; height: 50px;"></textarea>

                    </div>
                    <div style="flex: 1; display: flex; flex-direction: column; gap: 10px;">
                        <textarea name="ghiChu4-1" style="flex: 1; min-width: 100px; height: 50px;">Không quá 10% SV bỏ học hằng năm</textarea>

                    </div>
                </div>
                <!-- Rows for Tiêu Chí 5 -->
                <div style="display: flex; width: 100%;">
                <textarea name="tieuChi5" style="flex: 1; min-width: 100px; height: 200px; font-weight: bold;" readonly>5.Chăm sóc sinh viên diện đặc biệt; Công tác phối hợp để thực hiện nhiệm vụ CVHT</textarea>
                    <div style="flex: 2; display: flex; flex-direction: column; gap: 10px;">
                    <textarea name="moTaCongViec5-1" style="flex: 1; min-width: 100px; height: 50px; font-weight: bold;" readonly>Phối hợp với Trợ lý CTSV Khoa/Thư ký Khoa/Phụ trách học vụ để xử lý kịp thời, đầy đủ các đề xuất/khiếu nại (nếu có) của sinh viên</textarea>

                    </div>
                    <div style="flex: 1; display: flex; flex-direction: column; gap: 10px;">
                        <textarea name="cachThucHien5-1" style="flex: 1; min-width: 100px; height: 50px;"></textarea>

                    </div>
                    <div style="flex: 1; display: flex; flex-direction: column; gap: 10px;">
                        <textarea name="dinhLuong5-1" style="flex: 1; min-width: 100px; height: 50px;"></textarea>

                    </div>
                    <div style="flex: 1; display: flex; flex-direction: column; gap: 10px;">
                        <textarea name="thoiGian5-1" style="flex: 1; min-width: 100px; height: 50px;"></textarea>

                    </div>
                    <div style="flex: 1; display: flex; flex-direction: column; gap: 10px;">
                        <textarea name="ghiChu5-1" style="flex: 1; min-width: 100px; height: 50px;">Có sự hợp tác chặt chẽ</textarea>

                    </div>
                </div>
                <!-- Modal Footer -->
                <div class="modal-footer" style="display: flex; justify-content: flex-end; width: 100%; align-items: center;">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Hủy</button>
                    <button type="button" class="btn btn-primary save" style="margin-left: 10px;">Lưu</button>
                </div>

            </div>
        </div>
    </div>


<script>
//Add Modal JS
    function openAddPlanModal() { 
        var modal = new bootstrap.Modal(document.getElementById('AddSemesterPlanModal')); 
        modal.show(); 
    }
</script>